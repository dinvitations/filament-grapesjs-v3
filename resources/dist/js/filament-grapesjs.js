// resources/js/index.js
document.addEventListener("alpine:init", () => {
  Alpine.data(
    "grapesjs",
    ({ state, statePath, readOnly, tools, minHeight, container, plugins, settings }) => ({
      instance: null,
      state,
      tools,
      plugins,
      settings,
      init() {
        let enabledTools = {};
        let allSettings = {
          height: minHeight + "px",
          container: container ? container : ".filament-grapesjs .grapesjs-wrapper",
          showOffsets: true,
          fromElement: true,
          noticeOnUnload: false,
          storageManager: false,
          loadProjectData: state?.projectData,
          loadHtml: state?.html,
          loadCss: state?.css,
          loadJs: state?.js,
          plugins,
          ...settings
        };
        this.instance = grapesjs.init(allSettings);
        this.instance.on("update", (e) => {
          var projectData = this.instance.getProjectData();
          var rawHtml = this.instance.getHtml({
            cleanId: true
          });
          var cssContent = this.instance.getCss();
          var jsContent = this.instance.getJs();
          var extract = rawHtml.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);
          var htmlContent = extract ? extract[1] : rawHtml;
          this.state = {
            projectData,
            html: htmlContent,
            css: cssContent,
            js: jsContent
          };
        });
      }
    })
  );
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vanMvaW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FscGluZTppbml0JywgKCkgPT4ge1xuICAgIEFscGluZS5kYXRhKFxuICAgICAgICBcImdyYXBlc2pzXCIsXG4gICAgICAgICh7IHN0YXRlLCBzdGF0ZVBhdGgsIHJlYWRPbmx5LCB0b29scywgbWluSGVpZ2h0LCBjb250YWluZXIsIHBsdWdpbnMsIHNldHRpbmdzIH0pID0+ICh7XG4gICAgICAgICAgICBpbnN0YW5jZTogbnVsbCxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgIHRvb2xzOiB0b29scyxcbiAgICAgICAgICAgIHBsdWdpbnM6IHBsdWdpbnMsXG4gICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MsXG4gICAgICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgICAgIGxldCBlbmFibGVkVG9vbHMgPSB7fTtcblxuICAgICAgICAgICAgICAgIGxldCBhbGxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBtaW5IZWlnaHQgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lciA/IGNvbnRhaW5lciA6IFwiLmZpbGFtZW50LWdyYXBlc2pzIC5ncmFwZXNqcy13cmFwcGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3dPZmZzZXRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmcm9tRWxlbWVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbm90aWNlT25VbmxvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlTWFuYWdlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRQcm9qZWN0RGF0YTogc3RhdGU/LnByb2plY3REYXRhLFxuICAgICAgICAgICAgICAgICAgICBsb2FkSHRtbDogc3RhdGU/Lmh0bWwsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRDc3M6IHN0YXRlPy5jc3MsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRKczogc3RhdGU/LmpzLFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5zOiBwbHVnaW5zLFxuICAgICAgICAgICAgICAgICAgICAuLi5zZXR0aW5nc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gIGdyYXBlc2pzLmluaXQoIGFsbFNldHRpbmdzICk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5vbigndXBkYXRlJywgZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0RGF0YSA9IHRoaXMuaW5zdGFuY2UuZ2V0UHJvamVjdERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0h0bWwgPSB0aGlzLmluc3RhbmNlLmdldEh0bWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5JZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNzc0NvbnRlbnQgPSB0aGlzLmluc3RhbmNlLmdldENzcygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIganNDb250ZW50ID0gdGhpcy5pbnN0YW5jZS5nZXRKcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ID0gcmF3SHRtbC5tYXRjaCgvPGJvZHlcXGJbXj5dKj4oW1xcc1xcU10qPyk8XFwvYm9keT4vKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxDb250ZW50ID0gZXh0cmFjdCA/IGV4dHJhY3RbMV0gOiByYXdIdG1sO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IGh0bWxDb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzOiBjc3NDb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAganM6IGpzQ29udGVudFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKVxufSlcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxTQUFTLGlCQUFpQixlQUFlLE1BQU07QUFDM0MsU0FBTztBQUFBLElBQ0g7QUFBQSxJQUNBLENBQUMsRUFBRSxPQUFPLFdBQVcsVUFBVSxPQUFPLFdBQVcsV0FBVyxTQUFTLFNBQVMsT0FBTztBQUFBLE1BQ2pGLFVBQVU7QUFBQSxNQUNWO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxPQUFPO0FBQ0gsWUFBSSxlQUFlLENBQUM7QUFFcEIsWUFBSSxjQUFjO0FBQUEsVUFDZCxRQUFRLFlBQVk7QUFBQSxVQUNwQixXQUFXLFlBQVksWUFBWTtBQUFBLFVBQ25DLGFBQWE7QUFBQSxVQUNiLGFBQWE7QUFBQSxVQUNiLGdCQUFnQjtBQUFBLFVBQ2hCLGdCQUFnQjtBQUFBLFVBQ2hCLGlCQUFpQixPQUFPO0FBQUEsVUFDeEIsVUFBVSxPQUFPO0FBQUEsVUFDakIsU0FBUyxPQUFPO0FBQUEsVUFDaEIsUUFBUSxPQUFPO0FBQUEsVUFDZjtBQUFBLFVBQ0EsR0FBRztBQUFBLFFBQ1A7QUFDQSxhQUFLLFdBQVksU0FBUyxLQUFNLFdBQVk7QUFDNUMsYUFBSyxTQUFTLEdBQUcsVUFBVSxPQUFLO0FBQzVCLGNBQUksY0FBYyxLQUFLLFNBQVMsZUFBZTtBQUMvQyxjQUFJLFVBQVUsS0FBSyxTQUFTLFFBQVE7QUFBQSxZQUNoQyxTQUFTO0FBQUEsVUFDYixDQUFDO0FBQ0QsY0FBSSxhQUFhLEtBQUssU0FBUyxPQUFPO0FBQ3RDLGNBQUksWUFBWSxLQUFLLFNBQVMsTUFBTTtBQUVwQyxjQUFJLFVBQVUsUUFBUSxNQUFNLGlDQUFpQztBQUM3RCxjQUFJLGNBQWMsVUFBVSxRQUFRLENBQUMsSUFBSTtBQUV6QyxlQUFLLFFBQVE7QUFBQSxZQUNUO0FBQUEsWUFDQSxNQUFNO0FBQUEsWUFDTixLQUFLO0FBQUEsWUFDTCxJQUFJO0FBQUEsVUFDUjtBQUFBLFFBQ0osQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNKLENBQUM7IiwKICAibmFtZXMiOiBbXQp9Cg==
